<!DOCTYPE html>
<html lang="en">

<head>
    <title>Chair Choose</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="sweetalert2/sweetalert2.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="sweetalert2/sweetalert2.min.js"></script>
    <script src="./build/three.js"></script>
	<script src="./js/controls/OrbitControls.js"></script>
	<script src="./js/libs/stats.min.js"></script>
    <style>
        .label-color {
            color: red;
        }
        /*.threeview {
            position: absolute; 
            top: 150px;
            left:170px; 
            width: 100%; 
            text-align: center;
        }*/
        /*div#threeD {
            position:fixed;
            width:100px;
            height:100px;
            background:red;
            left:10px;
            top:100px;
        }*/
    </style>
</head>

<body>
    <nav class="navbar navbar-light" style="background-color: #5bc0de;">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>                        
                </button>
            </div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <div class="navbar-header">
                    <a class="navbar-brand" href="index.html">
                        <img src="logo.gif" alt="Chair Logo" width="40" height="30" />
                    </a>
                </div>
                <div class="collapse navbar-collapse" id="myNavbar">
                    <ul class="nav navbar-nav">
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">File <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="create_new_chair.html">Create New</a></li>
                                <li><a href="index.html">Exit</a></li>
                            </ul>
                        </li>
                        <li><a href="#">History</a></li>
                        <li><a href="#">Settings</a></li>
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="#"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
                        <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="col-sm-4 col-md-4 col-lg-4 col-xs-4" id="information1">
            <div class="panel panel-info">
                <div class="panel-heading">
                    <div class="panel-title">Personal Information</div>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label for="name">Name</label>
                        <input type="name" class="form-control" id="name">
                    </div>
                    <div class="form-group">
                        <label for="age">Age:</label>
                        <input type="number" class="form-control " id="age">
                    </div>
                    <div class="form-group">
                        <label for="sex">Sex:</label>
                        <select class="form-control" id="sex">
                        <option>Male</option>
                        <option>Female</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="weight">Weight:</label>
                        <input type="number" class="form-control" id="weight">
                    </div>
                    <div class="form-group">
                        <label for="height">Height:</label>
                        <input type="number" class="form-control" id="height">
                    </div>
                    <button type="button" class="btn btn-info" id="chair_creation">Generate</button>
                </div>
            </div>
        </div>
        <div class="col-sm-3 col-md-3 col-lg-3 col-xs-3" style="display:none; margin-top: 40px;" id="information2">
            <div class="panel panel-info">
                <div class="panel-heading">
                    <div class="panel-title">Personal Information</div>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label>Name:</label>
                        <p class="label-color" id="name1">Name</p>
                    </div>
                    <div class="form-group">
                        <label>Age:</label>
                        <p class="label-color" id="age1">Age</p>
                    </div>
                    <div class="form-group">
                        <label for="sex">Sex:</label>
                        <p class="label-color" id="sex1">Sex</p>
                    </div>
                    <div class="form-group">
                        <label for="weight">Weight:</label>
                        <p class="label-color" id="weight1">Weight</p>
                    </div>
                    <div class="form-group">
                        <label for="height">Height:</label>
                        <p class="label-color" id="height1">Height</p>
                    </div>
                    <div>
                            <button type="button" class="btn btn-danger" id="cancel">Cancel</button>
                            <button type="button" class="btn btn-success" id="submit">Submit</button>
                        </div>
                </div>
            </div>
        </div>

        <div style="display:none;" id="result">
            <div class="col-sm-1 col-md-1 col-lg-1 col-xs-1" style="margin-right: -20px; margin-top: 40px;">
                <div class="text-right">
                    <img src="side-logo.png" class="img-rounded" alt="Side logo" width="" height="620">
                </div>
            </div>

            <div class="col-sm-8 col-md-8 col-lg-8 col-xs-8" style="margin-top: 40px;">
                <!--<div class="text-center" style="margin-bottom: 5px;">
                    <button type="button" class="btn btn-info" id="plus"><span class="glyphicon glyphicon-plus"></span></button>
                    <button type="button" class="btn btn-danger" id="minus"><span class="glyphicon glyphicon-minus"></span></button>
                </div>-->
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <div class="panel-title"><span id="person_name">Name</span></div>
                    </div>
                    <!--<div class="panel-body">-->
                        <!--<div style="display:none;">-->
                        <script>
                            var container, stats;

                            var camera, controls, scene, renderer;

                            var cube, plane;

                            // Create new object by parameters

                            var createSomething = function( klass, args ) {

                                var F = function( klass, args ) {

                                    return klass.apply( this, args );

                                };

                                F.prototype = klass.prototype;

                                return new F( klass, args );

                            };


                            // Cube

                            var materials = [];

                            for ( var i = 0; i < 6; i ++ ) {

                                materials.push( [ new THREE.MeshBasicMaterial( { color: Math.random() * 0x22ffff, wireframe: false } ) ] );

                            }

                            var geometriesParams = [

                            
                                { type: 'BoxGeometry', args: [ 100, 0, 100, 4, 4, 4, materials ] },
                                { type: 'BoxGeometry', args: [ 100, 5, 100, 4, 4, 4, materials ] },
                                { type: 'BoxGeometry', args: [ 100, 10, 100, 4, 4, 4, materials ] },
                                { type: 'BoxGeometry', args: [ 100, 20, 100, 4, 4, 4, materials ] },
                                /*
                                { type: 'TorusGeometry', args: [ 100, 60, 12, 12 ] },
                                { type: 'TorusKnotGeometry', args: [  ] },
                                { type: 'SphereGeometry', args: [ 100, 12, 12 ] },
                                { type: 'SphereGeometry', args: [ 100, 5, 5 ] },
                                { type: 'SphereGeometry', args: [ 100, 13, 13 ] },
                                { type: 'IcosahedronGeometry', args: [ 100, 1 ] },
                                { type: 'CylinderGeometry', args: [ 25, 75, 200, 8, 3 ]} ,
                                { type: 'OctahedronGeometry', args: [200, 0] },
                                { type: 'LatheGeometry', args: [ [
                                    new THREE.Vector2(0,-100),
                                    new THREE.Vector2(50,-50),
                                    new THREE.Vector2(10,0),
                                    new THREE.Vector2(50,050),
                                    new THREE.Vector2(0,100) ] ]},
                                { type: 'LatheGeometry', args: [ [
                                    new THREE.Vector2(0,-100),
                                    new THREE.Vector2(50,-50),
                                    new THREE.Vector2(10,0),
                                    new THREE.Vector2(50,050),
                                    new THREE.Vector2(100,100) ], 12, 0, Math.PI ] },
                                { type: 'LatheGeometry', args: [ [
                                    new THREE.Vector2(10,-100),
                                    new THREE.Vector2(50,-50),
                                    new THREE.Vector2(10,0),
                                    new THREE.Vector2(50,050),
                                    new THREE.Vector2(0,100) ], 12, Math.PI*2/3, Math.PI*3/2 ] },
                                { type: 'TextGeometry', args: ['&', {
                                        size: 200,
                                        height: 50,
                                        curveSegments: 1
                                    }]},
                                { type: 'PlaneGeometry', args: [ 200, 200, 4, 4 ] }
                                */

                            ];

                            var loader = new THREE.FontLoader();
                            loader.load( 'fonts/helvetiker_regular.typeface.json', function ( font ) {

                                geometriesParams[ 12 ].args[ 1 ].font = font;

                            } );

                            var info;
                            var geometryIndex = 0;

                            // start scene

                            init();
                            animate();

                            function nextGeometry() {

                                geometryIndex ++;

                                if ( geometryIndex > geometriesParams.length - 1 ) {

                                    geometryIndex = 0;

                                }

                                addStuff();

                            }

                            function switchGeometry(i) {

                                geometryIndex = i;

                                addStuff();
                            }

                            function updateInfo() {

                                var params = geometriesParams[ geometryIndex ];

                                var dropdown = '<select id="dropdown" onchange="switchGeometry(this.value)">';

                                for (  i = 0; i < geometriesParams.length; i ++ ) {
                                    dropdown += '<option value="' + i + '"';

                                    dropdown += (geometryIndex == i)  ? ' selected' : '';

                                    dropdown += '>' + geometriesParams[i].type + '</option>';
                                }

                                dropdown += '</select>';

                                dropdown = "";
                                var text =
                                    //'Drag to spin THREE.' + params.type +
                                    //'<br>' +
                                    '<br>Presure level: ' + dropdown + ' <a href="#" onclick="nextGeometry();return false;">Add</a>';
                                /*
                                text +=
                                    '<br><br><font color="3333FF">Blue Arrows: Face Normals</font>' +
                                    '<br><font color="FF3333">Red Arrows: Vertex Normals before Geometry.mergeVertices</font>' +
                                    '<br>Black Arrows: Vertex Normals after Geometry.mergeVertices';
                */
                                info.innerHTML = text;

                            }

                            function addStuff() {

                                
                                if ( window.group !== undefined ) {

                                    scene.remove( group );

                                }



                                var params = geometriesParams[ geometryIndex ];

                                geometry = createSomething( THREE[ params.type ], params.args );

                                // scale geometry to a uniform size
                                geometry.computeBoundingSphere();

                                var scaleFactor = 160 / geometry.boundingSphere.radius;
                                geometry.scale( scaleFactor, scaleFactor, scaleFactor );

                                var originalGeometry = geometry.clone();
                                originalGeometry.computeFaceNormals();
                                originalGeometry.computeVertexNormals( true );

                                // in case of duplicated vertices
                                geometry.mergeVertices();
                                geometry.computeFaceNormals();
                                geometry.computeVertexNormals( true );

                                updateInfo();

                                var faceABCD = "abcd";
                                var color, f, p, n, vertexIndex;

                                for ( i = 0; i < geometry.faces.length; i ++ ) {

                                    f  = geometry.faces[ i ];

                                    n = ( f instanceof THREE.Face3 ) ? 3 : 4;

                                    for( var j = 0; j < n; j++ ) {

                                        vertexIndex = f[ faceABCD.charAt( j ) ];

                                        p = geometry.vertices[ vertexIndex ];

                                        color = new THREE.Color( 0xffffff );
                                        color.setHSL( ( p.y ) / 400 + 0.5, 1.0, 0.5 );

                                        f.vertexColors[ j ] = color;

                                    }

                                }

                                group = new THREE.Group();
                                scene.add( group );

                                
                                var mesh = new THREE.Mesh( geometry, new THREE.MeshBasicMaterial( { color: 0xfefefe, wireframe: true, opacity: 0.5 } ) );
                                group.add( mesh );

                                var fvNames = [ 'a', 'b', 'c', 'd' ];

                                var normalLength = 15;

                                for( var f = 0, fl = geometry.faces.length; f < fl; f ++ ) {
                                    var face = geometry.faces[ f ];

                                    var centroid = new THREE.Vector3()
                                        .add( geometry.vertices[ face.a ] )
                                        .add( geometry.vertices[ face.b ] )
                                        .add( geometry.vertices[ face.c ] )
                                        .divideScalar( 3 );

                                    var arrow = new THREE.ArrowHelper(
                                            face.normal,
                                            centroid,
                                            normalLength,
                                            0x3333FF );
                                    mesh.add( arrow );
                                }
                return;
                                for( var f = 0, fl = originalGeometry.faces.length; f < fl; f ++ ) {
                                    var face = originalGeometry.faces[ f ];
                                    if( face.vertexNormals === undefined ) {
                                        continue;
                                    }
                                    for( var v = 0, vl = face.vertexNormals.length; v < vl; v ++ ) {
                                        var arrow = new THREE.ArrowHelper(
                                                face.vertexNormals[ v ],
                                                originalGeometry.vertices[ face[ fvNames[ v ] ] ],
                                                normalLength,
                                                0xFF3333 );
                                        mesh.add( arrow );
                                    }
                                }

                                for( var f = 0, fl = mesh.geometry.faces.length; f < fl; f ++ ) {
                                    var face = mesh.geometry.faces[ f ];
                                    if( face.vertexNormals === undefined ) {
                                        continue;
                                    }
                                    for( var v = 0, vl = face.vertexNormals.length; v < vl; v ++ ) {
                                        var arrow = new THREE.ArrowHelper(
                                                face.vertexNormals[ v ],
                                                mesh.geometry.vertices[ face[ fvNames[ v ] ] ],
                                                normalLength,
                                                0x000000 );
                                        mesh.add( arrow );
                                    }
                                }

                            }

                            function init() {

                                container = document.createElement( 'div' );
                                container.id = 'threeD';
                                container.style.position = 'absolute';
                                container.style.top = '150px';
                                container.style.left = '470px';
                                // container.style.width = '100%';
                                container.style.textAlign = 'center';
                                container.style.display ='none';
                                // container.
                                document.body.appendChild( container );

                                info = document.createElement( 'div' );
                                // info.style.position = 'absolute';
                                // info.style.top = '50px';
                                // info.style.width = '100%';
                                // info.style.textAlign = 'center';
                                info.innerHTML = 'Drag to spin the geometry ';
                                container.appendChild( info );

                                camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 1000 );
                                camera.position.z = 500;

                                scene = new THREE.Scene();

                                var light = new THREE.PointLight( 0xffffff, 1.5 );
                                light.position.set( 1000, 1000, 2000 );
                                scene.add( light );

                                addStuff();
//                                 <div><div style="position: absolute; top: 50px; width: 100%; text-align: center;"><br>Presure level:  <a href="#" onclick="nextGeometry();return false;">Add</a></div><canvas width="500" height="500" class="text-right" style="width: 500px; height: 500px; margin:-470px 0px 0px 600px"></canvas><div style="position: fixed; top: 0px; left: 0px; cursor: pointer; opacity: 0.9; z-index: 10000;">
// <canvas width="80" height="48" style="width: 80px; height: 48px; display: block;"></canvas><canvas width="80" height="48" style="width: 80px; height: 48px; display: none;"></canvas><canvas width="80" height="48" style="width: 80px; height: 48px; display: none;"></canvas></div></div>
// // <canvas width="500" height="500" class="text-right" style="width: 500px; height: 500px; margin:-470px 0px 0px 600px"></canvas>
                                renderer = new THREE.WebGLRenderer( { antialias: true } ); // WebGLRenderer CanvasRenderer
                                // renderer.setClearColor( 0xf0f0f0 );
                                renderer.setClearColor( 0x000000 );
                                renderer.setPixelRatio( window.devicePixelRatio );
                                renderer.setSize( 700, 540 );
                                container.appendChild( renderer.domElement );

                                stats = new Stats();
                                container.appendChild( stats.dom );

                                //

                                controls = new THREE.OrbitControls( camera, renderer.domElement );

                                window.addEventListener( 'resize', onWindowResize, false );

                            }

                            function onWindowResize() {

                                camera.aspect = window.innerWidth / window.innerHeight;
                                camera.updateProjectionMatrix();

                                renderer.setSize( window.innerWidth, window.innerHeight );

                            }

                            //

                            function animate() {

                                requestAnimationFrame( animate );

                                controls.update();

                                render();
                                stats.update();

                            }

                            function render() {

                                renderer.render( scene, camera );

                            }

                        </script>
                        <!--</div>-->
                        <!--<div class="text-center" id="chair1" style="display:none">
                            <img src="image1.png" class="img-rounded" alt="Recommended Chair" width="500" height="500">
                        </div>
                        <div class="text-center" id="chair2" style="display:none">
                            <img src="image2.png" class="img-rounded" alt="Recommended Chair" width="500" height="500">
                        </div>
                        <div class="text-center" id="chair3" style="display:none">
                            <img src="image3.png" class="img-rounded" alt="Recommended Chair" width="500" height="500">
                        </div>
                        <div class="text-center" id="chair4" style="display:none">
                            <img src="image4.png" class="img-rounded" alt="Recommended Chair" width="500" height="500">
                        </div>-->
                        <!--<div class="text-center" style="margin-top:10px">
                            <button type="button" class="btn btn-danger" id="cancel">Cancel</button>
                            <button type="button" class="btn btn-success" id="submit">Submit</button>
                        </div>-->
                    <!--</div>-->
                </div>
            </div>
        </div>

        <script src="chair_creation.js"></script>

</body>

</html>